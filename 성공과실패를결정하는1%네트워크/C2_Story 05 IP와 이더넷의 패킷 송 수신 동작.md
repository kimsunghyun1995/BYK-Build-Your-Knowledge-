### 1. 패킷의 기본

패킷은 **헤더**와 **데이터**로 구성되어 있고, 헤더에는 제어정보, 데이터에는 내용이 들어있다.

먼저 송신처가 되는 기기가 패킷을 만들면 패킷의 제어정보에 따라 가까운 중계 장치로 이동한다.

중계장치에 도착하면 중계 장치 안의 목적지 테이블을 활용하여 다른 가까운 중계 장치로 이동하는 방식이다. 최종적으로 수신처의 기기에 패킷이 도착하는 것이다. 이러한 중계기기들을 **엔드노드** 또는 **중계노드**라 한다.

TCP/IP 패킷 구조는 더 발전한 형태로, 서브넷이 **라우터**와**허브**라는 두 종류의 패킷 중계 장치에서 다음과 같은 역할은 분담한다.

- 라우터가 목적지를 확인하여 다음 라우터를 나타낸다.(**라우터는 IP 규칙에 따라 패킷 운반**)
  - IP가 목적지를 확인하여 다음 IP의 중계장치를 나타낸다.
- 허브가 서브넷 안에서 패킷을 운반하여 다음 라우터에 도착한다.(**허브는 이더넷의 규칙을 따름**)
  - 서브넷 안에 있는 이더넷이 중계 장치까지 패킷을 운반한다.

아래는 TCP/IP의 패킷구조인데 MAC과 IP 헤더가 붙어있고 역할을 분담하여 패킷을 운반한다.

![image](https://user-images.githubusercontent.com/48992412/211034809-5d589c3c-9836-4af8-a4ff-1e3d7a35cb42.png)

송신처에서 패킷의 목적지가 되는 액세스 대상 서버의 IP 주소를 IP 헤더에 기록, 이후, 어느 방향에 있는지 조사 후, 그 방향에 있는 다음 라우터에 패킷이 도착하도록 이더넷에 의뢰한다. 이때 다음 라우터에 할당된 이더넷의 주소(MAC 주소)를 조하사고, 이것을 MAC 헤더에 기록한다. 

아래 그림은 IP 패킷을 운반하는 원리이다.![image](https://user-images.githubusercontent.com/48992412/211037625-a4ea8a0f-6d5e-4b1b-86b2-9360af4fd24c.png)

위 내용이 클라이언트 -> 허브 과정이다.

허브에서는 이더넷 헤더 정보를 이용하여 중계한다. 허브가 복수이면 허브->허브로 순차적으로 경유하여 패킷이 진행된다. - 2번과정

라우터에는 IP 헤더의 정보를 이용하여 어느 라우터로 보낼지 결정하고, MAC 헤더에 다음 라우터의 MAC 주소로 바꾸어 사용한다. 이후 패킷을 다음 라우터로 송신한다.

그림에는 없지만 **이후 허브에 도착하고 또 다음 라우터에 도착**하는 이러한 형태가 반복될 것이고, 패킷은 목적지에 도달할 것이다. 이러면 패킷을 전달하는 동작은 완료된다.



### 패킷 송 수신 동작의 개요









## 질문

어느 방향에 있는지 조사를 어떻게 하는가?

